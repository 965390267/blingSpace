{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/util.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["import { observe } from \"./index.js\";\n\n// 拦截用户调用的push shift unshift pop reverse sort splice concat\n\nlet oldArrayProtoMethods = Array.prototype;\n\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\n\nlet methods = ['push','shift','unshift', 'pop', 'reverse', 'sort', 'splice', 'concat'];\n\n\nmethods.forEach(method=>{\n    // console.log(arrayMethods,method);\n\n    arrayMethods[method] = function (...args){\n        let r = oldArrayProtoMethods[method].apply(this,args)\n\n        // todo\n        let inserted;\n        let ob = this.__ob__;\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                inserted = args;break;\n            case \"splice\":\n                inserted = args.slice(2)\n            default:\n                break;\n        }\n        // console.log(inserted);\n\n        if(inserted) ob.observerArray(inserted)\n        return r;\n\n    }\n})\n\n","\nexport const LIFECYCLE_HOOKS   = [\n    \"beforeCreate\",\n    \"created\",\n    \"beforeMount\",\n    \"mounted\",\n    \"beforeUpdate\",\n    \"updated\",\n    \"beforeDestory\",\n    \"destoryed\"\n];\n\nconst strats = {};\nstrats.data = function (parentVal,childValue){\n    return childValue\n}\nstrats.computed = function (){}\nstrats.watch = function (){}\nfunction mergeHook(parentVal,childValue){ // 生命周期的合并\n    if(childValue){\n        // 父有子有\n        if (parentVal) {\n            return parentVal.concat([childValue]);\n        }else {\n            // 父无子有\n            return [childValue];\n        }\n    }\n    else {\n        // 父有子无\n        return parentVal;\n    }\n}\n\nLIFECYCLE_HOOKS.forEach(lifeCycle=>{\n    strats[lifeCycle] = mergeHook;\n})\nexport function mergeOptions(parent,child) {\n    const options = {};\n    // 遍历处理父亲所有key\n    for (const key in parent) {\n            mergeField(key);\n    }\n    // 遍历所有父无子有属性\n    for (const key in child) {\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key);\n        }\n    }\n    // 子有父无\n\n    \n    /**\n     * 合并字段\n     * @param {*} key \n     */\n    function mergeField(key) {\n        if(strats[key]){\n            options[key] = strats[key](parent[key],child[key]);\n        }else {\n            options[key] = child[key];\n        }\n    }\n    return options;\n}\n\nexport function defineProperty(target,key,value) {\n    Object.defineProperty(target,key,{\n        enumerable:false,\n        configurable: false,\n        value\n    })\n}\n\n","import {arrayMethods} from './array';\nimport { defineProperty } from '../util';\nclass Observer {\n    constructor(data){\n\n        if (Array.isArray(data)) {\n            // 新增属性，声明此属性已被观测\n            defineProperty(data,\"__ob__\",this);\n\n            // 只能拦截数组的方法，但对数组中的每一项 无法监听 需要观测\n            data.__proto__ = arrayMethods;\n            this.observerArray(data)\n            // console.log(data,arrayMethods);\n\n        } else {\n            this.walk(data)\n        }\n    }\n    walk(data){\n        let keys = Object.keys(data);\n        keys.forEach(key=>{\n            defineReactuve(data,key,data[key]);\n        })\n    }\n    observerArray(value) {\n        for (let i  = 0; i < value.length; i++) {\n            observe(value[i])\n        }\n    }\n}\n\nfunction defineReactuve(data,key,value){\n    // 实现递归\n    observe(value)\n    Object.defineProperty(data,key,{\n        get(){\n            console.log('用户取值');\n            return value\n        },\n        set(newValue){\n            console.log('用户赋值');\n            if(value !== newValue){\n                // 对新赋值的对象进行观测\n                observe(newValue);\n                value = newValue\n            }\n        }\n    }\n    )\n\n\n}\n\nexport function observe(data){\n    if(typeof data !== 'object' || data == null){\n        return;\n    }\n    if(data.__ob__) return;\n    return new Observer(data);\n}","import { observe } from \"./observer/index\";\n\nexport function initState(vm){\n    let opts = vm.$options;\n    let {methods,data,props,computed,watch} = opts;\n    if(methods){\n        initMethod(vm)\n    }\n    if(data){\n        initData(vm)\n    }\n    if(props){\n        initProps(vm)\n    }\n    if(computed){\n        initComputed(vm)\n    }\n    if(watch){\n        initWatch(vm)\n    }\n\n}\nfunction initMethod(vm) {\n\n}\nfunction proxy(vm,data,key) {\n    Object.defineProperty(vm,key,{\n        get(){\n            return vm[data][key];\n        },\n        set(newValue){\n            vm[data][key] = newValue;\n        }\n    })\n}\nfunction initData(vm) {\n    let data = vm.$options.data;\n    vm._data = data = typeof data == 'function' ? data.call(vm) : data;\n\n    // 进行代理，实现直接从实例上处理数据\n    for (const key in data) {\n       proxy(vm,'_data',key)\n    }\n\n    observe(data);\n}\nfunction initProps(vm) {\n\n}\nfunction initComputed(vm) {\n\n}\nfunction initWatch(vm) {\n\n}","// <div>姓名 {{name}} <span>111</span></div>   =>>\n// {\n//     tag: 'div',\n//     parent: null,\n//     attrs: [],\n//     children: [{\n//         tag: null,\n//         parent: 父div,\n//         text: \"姓名 {{name}}\"\n//     },{\n//         tag: 'span',\n//         parent: 父div,\n//         attrs: [],\n//         children: [{\n//             tag:null,\n//             parent: 父div,\n//             text: 111\n//         }]\n//     }]\n// }\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 以 a-z A-Z _ 开头 后面可以接\\-\\.0-9_a-zA-Z]\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g   // mustatine  语法\n// 注意match\n// 1. 没有 g   ： 返回标准匹配格式，即：数组的第一个元素是整体匹配的内容，接下来是分组捕获的内容，然后是整体匹配的第一个下标，最后是目标字符串\n// 2. 有g ：返回的是一个包含所有匹配内容的数组\n\n\n\n\nexport function parseHTML(html) {\n    let\n        root,  // ast树 树根\n        currentParent,// 遍历时存储当前父级元素的变量\n        stack = []; // 存储标签的栈 用于校验html结构是否正确\n    // debugger;\n    while (html){\n        // 1. 以<开头的必是 标签\n        let textEnd = html.indexOf('<');\n        if(textEnd == 0){\n            const startTagMatch = parseStartTag();\n            if(startTagMatch){\n                start(startTagMatch.tagName,startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) {\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]);// 将结束标签传入\n                continue;\n            }\n        }\n        let text;\n        // 如果是文本\n        if(textEnd >= 0){\n            text = html.substring(0,textEnd);\n        }\n        if(text){\n            advance(text.length);\n            chars(text);\n        }\n    }\n\n\n    return root;\n    // 信息处理函数\n    function start(tagName,attrs) {\n        let element = createASTElement(tagName,attrs);\n        if(!root){\n            root = element\n        }\n        currentParent = element;\n        stack.push(element)\n    }\n    // 在结尾标签处创建父子关系\n    function end(tagName){\n        let element = stack.pop();\n        currentParent = stack[stack.length - 1];\n        // 在标签闭合时记录标签的父级\n        if(currentParent){\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n    function chars(text){\n        text = text.replace(/\\s/g,'');\n        if (text) {\n            currentParent.children.push({\n                type: 3,\n                text\n            })\n        }\n    }\n    // 生成ast树单元\n    function createASTElement(tagName,attrs) {\n        return {\n            tag: tagName, //标签名\n            type: 1, // 标签类型\n            children:[], // 孩子列表\n            attrs, // 属性集合\n            parent:null // 父级元素\n        }\n    }\n\n    // 将字符串进行截取操作，再更新字符串\n    function advance(n) {\n        html = html.substring(n)\n\n    }\n    function parseStartTag(){\n        const start = html.match(startTagOpen);\n        if(start){\n            const match = {\n                tagName: start[1],\n                attrs:[]\n            }\n            advance(start[0].length);\n            let attr,end;\n            // 1. 不是结尾 2. 存在属性\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\n               match.attrs.push( {\n                    name:attr[1],\n                    value: attr[3] || attr[4] || attr[5],\n                })\n                advance(attr[0].length);\n            }\n            if(end){\n                advance(end[0].length);\n                return match;\n            }\n        }\n        // console.log(html);\n    }\n}\n","\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g   // mustatine  语法\n\nfunction genProps(attrs) {\n    let str = \"\";\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {};\n            attr.value.split(';').forEach(item => {\n                let [key,value] = item.split(':');\n                obj[key] = value;\n            })\n            attr.value = obj;\n        }\n        str += `${attr.name} : ${JSON.stringify(attr.value)},`\n\n    }\n    console.log(str);\n    return `{${str.slice(0,-1)}}`;\n}\n\nfunction gen(node) {\n    if(node.type == 1){\n        return generate(node);\n    }else {\n        let text = node.text;\n        if(!defaultTagRE.test(text)){\n             // 如果是普通文本\n            return `_v(${JSON.stringify(text)})`\n        }else {\n            // 存放每一段的代码\n            let tokens = [];\n            let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式 需要每次使用前将索引置为0\n            let match,index;\n            while (match = defaultTagRE.exec(text)) {\n                index = match.index;// 保存匹配到的索引\n                if(index > lastIndex){\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n                }\n                tokens.push(`_s(${match[1].trim()})`);\n                lastIndex = index + match[0].length;\n            }\n            if(lastIndex < text.length){\n                tokens.push(JSON.stringify(text.slice(lastIndex)));\n            }\n            return `_v(${tokens.join('+')})`;\n        }\n\n    }\n}\n\nfunction genChildren(el) {\n    const children = el.children;\n    if(children){\n        return children.map(child => gen(child)).join(',');\n    }\n}\n\nexport function generate(el) {\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',\n    ${el.attrs.length ? `${genProps(el.attrs)}` : 'undefine'}\n    ${\n        children ? `,${children}`: ''\n    }\n    )`;\n    return code;\n}","import {parseHTML} from './parse';\nimport { generate } from './generate';\nexport function compilerToFunction(template){\n    // 生成树\n    let ast = parseHTML(template);\n    // 优化静态节点\n    \n    // 通过树生成代码\n    let code = generate(ast);\n\n    // 1. 代码转fn \n    // 2. 全局变量转vm with\n    let render = new Function(`with(this){return ${code}}`);\n    return render;\n\n}","export function patch(oldVnode,vnode){\n    const isRealElement = oldVnode.nodeType;\n    if(isRealElement){\n        const oldElm = oldVnode;\n        const parentElm = oldElm.parentNode;\n        \n        let el = createElm(vnode);\n        parentElm.insertBefore(el,oldElm.nextSibling);\n        parentElm.removeChild(oldVnode)\n   \t\treturn el;\n    } \n}\nfunction createElm(vnode){\n    let {tag,children,key,data,text} = vnode;\n    if(typeof tag === 'string'){\n        vnode.el = document.createElement(tag);\n        updateProperties(vnode);\n        children.forEach(child => { \n            return vnode.el.appendChild(createElm(child));\n        });\n    }else{\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el\n}\nfunction updateProperties(vnode){\n    let newProps = vnode.data || {}; // 获取当前老节点中的属性 \n    let el = vnode.el; // 当前的真实节点\n    for(let key in newProps){\n        if(key === 'style'){ \n            for(let styleName in newProps.style){\n                el.style[styleName] = newProps.style[styleName]\n            }\n        }else if(key === 'class'){\n            el.className= newProps.class\n        }else{ // 给这个元素添加属性 值就是对应的值\n            el.setAttribute(key,newProps[key]);\n        }\n    }\n}","import {patch} from './vdom/patch';\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        patch(vm.$el,vnode)\n    }\n}\n\nexport function mountComponent(vm,el) {\n// 调用render方法，渲染el属性\n\n    // 先使用render方法创建虚拟节点 \n    vm._update(vm._render());\n    // 将虚拟节点渲染到页面上\n}\n\nexport function callHook(vm,hook) {\n    const handlers = vm.$options[hook];\n    if(handlers){\n        for (let index = 0; index < handlers.length; index++) {\n            const handler = handlers[index];\n            handler.call(vm);\n        }\n    }\n    \n}","import { initState } from \"./state\";\nimport Vue from \"./index\";\nimport {compilerToFunction} from './compiler/index';\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from \"./util\";\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this;\n        vm.$options = mergeOptions(vm.constructor.options,options);\n        callHook(vm,'beforeCreate');\n        // 初始化数据\n        initState(vm);\n        callHook(vm,'created');\n\n        if(vm.$options.el){\n            vm.$mount(vm.$options.el);\n        }\n    }\n}\nVue.prototype.$mount = function (el){\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n    if(!options.render){\n        // 如果无render属性 判断有无template\n        let template = options.template;\n        // 无template 且有el则将el内容赋值给template\n        if(!template && el){\n            template = el.outerHTML;\n        }\n        const render = compilerToFunction(template);\n        options.render = render;\n    }\n\n    // options中存在render后 开始挂载此组件\n    callHook(vm,'beforeMount');\n    mountComponent(vm,el);\n    callHook(vm,'mounted');\n\n}","export function renderMixin(Vue) {\n    Vue.prototype._render = function () {\n        const vm = this;\n        const render = vm.$options.render;\n        let vnode = render.call(vm);\n        return vnode;\n    }\n    Vue.prototype._c = function () { // 创建元素\n        return createElement(...arguments);\n    }\n    Vue.prototype._v = function (text) {  // 创建文本\n        return createTextVnode(text)\n    }\n    Vue.prototype._s = function (val) { // stringify\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\n    }\n}\n\nfunction createElement(tag,data={},...children) {\n    let key = data.key;\n    if(key){\n        delete data.key;\n    }\n    return vnode(tag,data,key,children); \n}\nfunction createTextVnode(text) {\n    return vnode(undefined,undefined,undefined,undefined,text)\n}\n// 产生虚拟dom  与ast相比 差异在于 可以自定义数据格式\nfunction vnode(tag,data,key,children,text) {\n    return {\n        tag,data,key,children,text\n    }\n}","import { mergeOptions } from \"../util\";\n\nexport function initGlobalApi(Vue) {\n    Vue.options = {};\n    Vue.mixin = function (mixin) {\n        this.options = mergeOptions(this.options,mixin);\n        console.log(this.opions);\n    }\n}","import {initMixin} from './init';\nimport { lifecycleMixin } from './lifecycle';\nimport { renderMixin } from './vdom/index';\nimport { initGlobalApi } from './global-api/index';\n\nfunction Vue(options){\n    this._init(options);\n}\n// 原型方法\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n// 静态方法\ninitGlobalApi(Vue);\n\nexport default Vue;"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","r","apply","inserted","ob","__ob__","slice","observerArray","LIFECYCLE_HOOKS","strats","data","parentVal","childValue","computed","watch","mergeHook","concat","lifeCycle","mergeOptions","parent","child","options","key","mergeField","hasOwnProperty","defineProperty","target","value","enumerable","configurable","Observer","constructor","isArray","__proto__","walk","keys","defineReactuve","i","length","observe","get","console","log","set","newValue","initState","vm","opts","$options","props","initData","proxy","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","text","substring","chars","element","createASTElement","push","pop","children","replace","type","tag","n","attr","name","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","trim","join","genChildren","el","map","code","compilerToFunction","template","ast","render","Function","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","class","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","_render","callHook","hook","handlers","handler","initMixin","_init","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_v","createTextVnode","_s","val","undefined","initGlobalApi","mixin","opions"],"mappings":"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"}